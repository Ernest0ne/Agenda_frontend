<div class="layout-menu-container">
    <div class="layout-menu-logo">

    </div>
    <div class="layout-menu-wrapper">
        <p-scrollPanel #layoutMenuScroller [style]="{height: '100%' }">
            <div class="menu-scroll-content">
                <app-menu></app-menu>
            </div>
        </p-scrollPanel>
    </div>
</div>
<div class="layout-topbar" [ngClass]="{'breadcrumb-active': app.showTitleOrBreadcrumb}">
    <a class="layout-menu-button clickPrev"
        *ngIf="funcionesGenerales.existsBtnPrev() && funcionesGenerales.getDevice()">
        <em class="pi pi-arrow-left" (click)="clickPrev();"></em>
    </a>
    <a class="layout-menu-button" (click)="app.onMenuButtonClick($event);showLogo();"
        [ngClass]="status ? 'active':'inactive'">
        <em class="pi pi-bars"></em>
    </a>

    <a class="layout-topbar-logo">
        <a id="bread-crumb" [hidden]="app.showTitleOrBreadcrumb" (click)="app.showMobileTitle(true)">
            <p style="font-size:15px;color:white">{{title}}</p>
        </a>
        <a [hidden]="!app.showTitleOrBreadcrumb" (click)="app.showMobileTitle(false)">
            <ng-container>
                <app-breadcrumb></app-breadcrumb>
            </ng-container>
        </a>
    </a>

    <a id="topbar-menu-button" href="#" (click)="app.onTopbarMenuButtonClick($event)"
        [ngClass]="{'active-notification':app.activeTopbarItem === notifications}">
        <em class="pi pi-ellipsis-v"></em>
    </a>

    <ul class="topbar-menu fadeInDown" [ngClass]="{'topbar-menu-visible': app.topbarMenuActive}">
        <li #settings [ngClass]="{'active-topmenuitem':app.activeTopbarItem === settings}">
            <a href="#" (click)="app.onTopbarItemClick($event,settings)">
                <em class="topbar-icon pi pi-cog"></em>
                <span class="topbar-item-name">Settings</span>
            </a>
            <ul class="fadeInDown">

                <li role="menuitem">
                    <a href="/#/AgendApp/Usuario" [attr.tabindex]="!active ? '-1' : null">
                        <em class="pi pi-cog"></em>
                        <span>Información del usuario</span>
                    </a>
                </li>
                <li role="menuitem">
                    <a class="cursorHand" (click)="logoutUser()" [attr.tabindex]="!active ? '-1' : null">
                        <em class="pi pi-user"></em>
                        <span>Cerrar sesión</span>
                    </a>

                </li>
            </ul>
        </li>
        <li #profile class="user-profile" *ngIf="app.profileMode==='popup'||app.isHorizontal()"
            [ngClass]="{'active-topmenuitem':app.activeTopbarItem === profile}">

            <a href="#" (click)="app.onTopbarItemClick($event,profile)">
                <img alt="babylon-layout" src="{{imagenUsuarioPerfil}}" />
                <span class="topbar-item-name">{{cargo}}</span>
            </a>

            <ul class="fadeInDown">
                <li role="menuitem">
                    <a href="/#/polarisCore/user/updatePassword" [attr.tabindex]="!active ? '-1' : null">
                        <em class="pi pi-cog"></em>
                        <span>Actualizar contraseña</span>
                    </a>
                    <a href="#" (click)="logoutUser()" [attr.tabindex]="!active ? '-1' : null">
                        <em class="pi pi-user"></em>
                        <span>Cerrar sesion</span>
                    </a>
                </li>

            </ul>
        </li>

        <div class="mask" *ngIf="app.activeTopbarItem === notifications"></div>
        <li class="btn-notifi" #notifications
            [ngClass]="{'active-topmenuitem':app.activeTopbarItem === notifications , 'quit': app.activeTopbarItem != notifications}">
            <a href="#" (click)="app.onTopbarItemClick($event,notifications)">
                <em class="topbar-icon icon-bell"></em>
                <span class="topbar-badge" *ngIf="noti_length != '0' && noti_length !=''"> {{noti_length}} </span>
            </a>

            <ul class="notification hide" id="notification" *ngIf="noti_length > 0">
                <perfect-scrollbar class="content-notification" [disabled]="funcionesGenerales.getDevice()">
                    <div class="box-notification" *ngFor=" let notificacion of notificaciones"
                        id="{{notificacion.noti_id}}">
                        <li role="menuitem">
                            <a>
                                <div class="box-header">
                                    <em class="icon-logo-svg"></em>
                                    <h3 class="tagFont">{{notificacion.noti_origin}}</h3>
                                    <button (click)="verNotificacion(notificacion.noti_id)" class="buttonGo">X</button>
                                </div>
                                <div class="box-body">
                                    <h3 class="tagFont">{{notificacion.noti_msg}}</h3>
                                    <h3 class="tagFont" *ngIf="notificacion.noti_length == 1"
                                        [innerHTML]="notificacion.noti_espe"></h3>
                                    <h3 class="tagFont">Estado: {{notificacion.noti_state}}</h3>
                                    <h3 class="tagFont">Tipo: {{notificacion.noti_type}}</h3>
                                </div>
                                <div *ngIf="notificacion.noti_show">
                                    <h3 class="tagFont" [innerHTML]="notificacion.noti_espe"></h3>
                                </div>
                                <div class="box-footer">
                                    <div>
                                        <h4 class="tagFont">{{notificacion.noti_date_create}}</h4>
                                        <em class="pi pi-calendar"></em>
                                    </div>
                                    <button *ngIf="notificacion.noti_data || notificacion.noti_length > 1"
                                        icon="pi pi-chevron-down" pButton
                                        (click)="mostrarModalUbicaciones(notificacion);"></button>
                                </div>
                            </a>
                        </li>
                    </div>
                </perfect-scrollbar>
            </ul>

        </li>
    </ul>
</div>


<p-confirmDialog class="confirmDialogModal" header="Confirmar" icon="icommon fa fa-question-circle" width="425"
    style="align-content: center" #cd>
    <p-footer>
        <button class="btn-polaris" type="button" pButton icon="icon-checked" style="text-align: center" label="Sí"
            (click)="cd.accept()"></button>
        <button class="btn-polaris" type="button" pButton icon="icon-cancel" style="text-align: center" label="No"
            (click)="cd.reject()"></button>
    </p-footer>
</p-confirmDialog>

<p-toast key="tst" [style]="{marginTop: '100px', width: '300px'}"></p-toast>